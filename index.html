<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Yasmeen ğŸ’• Ù„Ù€ ÙŠØ§Ø³Ù…ÙŠÙ‰Û á¥«á­¡</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Aref+Ruqaa+Ink:wght@400;700&family=Cairo:wght@300;400;600;700&family=Lemonada:wght@300;400;600;700&family=Dancing+Script:wght@400;700&family=Quicksand:wght@300;400;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    min-height: 100vh;
    background: linear-gradient(135deg, #1a0011, #2d0a1e, #3d1133, #2d0a1e, #1a0011);
    background-size: 400% 400%;
    animation: gradientShift 10s ease infinite;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Cairo', sans-serif;
    color: #fff;
    cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'><defs><filter id='g'><feGaussianBlur stdDeviation='1.2'/></filter></defs><text y='22' x='4' font-size='18' filter='url(%23g)' fill='%23ff6b95' opacity='0.7'>á¥«á­¡</text><text y='22' x='4' font-size='18' fill='%23ffb6c1'>á¥«á­¡</text></svg>") 16 16, auto;
  }
  body.en { font-family: 'Quicksand', sans-serif; direction: ltr; }

  @keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  /* Language toggle */
  .lang-toggle {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 200;
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 150, 180, 0.2);
    border-radius: 50px;
    padding: 8px 20px;
    color: #ff8aaf;
    font-size: 14px;
    font-family: 'Cairo', sans-serif;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
  }
  .lang-toggle:hover {
    background: rgba(255, 100, 150, 0.15);
    border-color: rgba(255, 150, 180, 0.4);
    transform: scale(1.05);
  }

  /* Floating elements */
  .hearts-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
  .floating-heart {
    position: absolute;
    opacity: 0;
    animation: floatUp linear infinite;
    filter: drop-shadow(0 0 8px rgba(255, 80, 130, 0.4));
  }
  @keyframes floatUp {
    0% { transform: translateY(100vh) rotate(0deg) scale(0.4); opacity: 0; }
    10% { opacity: 0.7; }
    90% { opacity: 0.4; }
    100% { transform: translateY(-10vh) rotate(360deg) scale(1.3); opacity: 0; }
  }

  /* Stars / sparkles */
  .sparkle {
    position: fixed;
    width: 3px; height: 3px;
    background: #fff;
    border-radius: 50%;
    animation: twinkle 2.5s ease-in-out infinite alternate;
  }
  @keyframes twinkle {
    0% { opacity: 0.1; transform: scale(1); }
    100% { opacity: 1; transform: scale(1.8); }
  }

  /* Rose petals */
  .petal {
    position: fixed;
    pointer-events: none;
    z-index: 1;
    font-size: 16px;
    opacity: 0;
    animation: petalFall linear infinite;
  }
  @keyframes petalFall {
    0% { transform: translateY(-5vh) translateX(0) rotate(0deg); opacity: 0; }
    10% { opacity: 0.6; }
    100% { transform: translateY(105vh) translateX(80px) rotate(400deg); opacity: 0; }
  }

  /* Shooting stars */
  .shooting-star {
    position: fixed;
    width: 3px; height: 3px;
    background: #fff;
    border-radius: 50%;
    z-index: 1;
    pointer-events: none;
    animation: shoot 1.5s linear forwards;
    box-shadow: 0 0 6px 2px rgba(255, 255, 255, 0.6);
  }
  .shooting-star::after {
    content: '';
    position: absolute;
    top: 0; right: 0;
    width: 60px; height: 1px;
    background: linear-gradient(to left, rgba(255,255,255,0.6), transparent);
  }
  @keyframes shoot {
    from { transform: translate(0, 0); opacity: 1; }
    to { transform: translate(-300px, 300px); opacity: 0; }
  }

  /* Screens */
  .screen {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10;
    opacity: 0;
    transition: opacity 1s ease;
    pointer-events: none;
    padding: 20px;
    overflow: hidden;
  }
  .screen.active { opacity: 1; pointer-events: all; }
  #screen4 { justify-content: flex-start; padding-top: 10px; }

  /* Screen 1: Rose/Envelope */
  .opener-wrapper { cursor: pointer; animation: gentleBounce 2.5s ease-in-out infinite; text-align: center; }
  @keyframes gentleBounce {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-15px) rotate(2deg); }
  }
  .opener-emoji {
    font-size: 110px;
    filter: drop-shadow(0 0 35px rgba(255, 50, 100, 0.7));
    transition: all 0.4s ease;
    display: block;
  }
  .opener-wrapper:hover .opener-emoji {
    transform: scale(1.2) rotate(-10deg);
    filter: drop-shadow(0 0 60px rgba(255, 50, 100, 1));
  }
  .opener-text {
    font-family: 'Lemonada', cursive;
    font-size: 24px;
    margin-top: 20px;
    color: #ff8aaf;
    text-shadow: 0 0 25px rgba(255, 138, 175, 0.4);
    animation: pulse 2s ease-in-out infinite;
  }
  body.en .opener-text { font-family: 'Dancing Script', cursive; font-size: 26px; }
  .opener-hint {
    font-size: 14px;
    margin-top: 10px;
    opacity: 0.4;
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
  }

  /* Screen 2: Letter */
  .letter-box {
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(25px);
    border: 1px solid rgba(255, 150, 180, 0.12);
    border-radius: 28px;
    padding: 45px 38px;
    max-width: 540px;
    width: 92%;
    text-align: center;
    box-shadow: 0 25px 70px rgba(0,0,0,0.35), inset 0 0 100px rgba(255, 80, 130, 0.02);
    animation: slideIn 0.8s ease;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateY(50px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }
  .letter-name {
    font-family: 'Aref Ruqaa Ink', serif;
    font-size: 56px;
    background: linear-gradient(135deg, #ff5c8a, #ffb6c1, #ff3d6e, #ffcdd9);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmer 3s ease infinite;
    margin-bottom: 5px;
  }
  body.en .letter-name { font-family: 'Dancing Script', cursive; font-size: 48px; }
  @keyframes shimmer {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  .letter-sub {
    font-family: 'Lemonada', cursive;
    font-size: 15px;
    color: rgba(255, 182, 193, 0.6);
    margin-bottom: 18px;
  }
  .letter-body {
    font-size: 18px;
    line-height: 2.1;
    color: rgba(255, 255, 255, 0.88);
    margin: 15px 0 30px;
    font-weight: 300;
    text-align: right;
    direction: rtl;
    min-height: 180px;
  }
  body.en .letter-body { text-align: left; direction: ltr; font-size: 17px; line-height: 1.9; }
  .letter-body .highlight { color: #ff8aaf; font-weight: 700; }
  .letter-body .bold-love { color: #ff5c8a; font-weight: 700; font-size: 20px; }
  body.en .letter-body .highlight { color: #ffb6c1; font-weight: 600; }

  .continue-btn {
    background: linear-gradient(135deg, #ff3366, #ff6b95);
    border: none;
    padding: 15px 45px;
    border-radius: 50px;
    color: #fff;
    font-size: 18px;
    font-family: 'Cairo', sans-serif;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 10px 35px rgba(255, 51, 102, 0.4);
    letter-spacing: 1px;
  }
  body.en .continue-btn { font-family: 'Quicksand', sans-serif; font-size: 17px; }
  .continue-btn:hover {
    transform: translateY(-3px) scale(1.04);
    box-shadow: 0 14px 45px rgba(255, 51, 102, 0.6);
  }

  /* Screen 3: Question */
  .question-box { text-align: center; animation: slideIn 0.8s ease; }
  .question-emoji {
    font-size: 90px;
    animation: heartbeat 1s ease-in-out infinite;
    filter: drop-shadow(0 0 30px rgba(255, 80, 130, 0.7));
    margin-bottom: 15px;
  }
  @keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    14% { transform: scale(1.18); }
    28% { transform: scale(1); }
    42% { transform: scale(1.12); }
  }
  .question-text {
    font-family: 'Lemonada', cursive;
    font-size: 32px;
    margin-bottom: 35px;
    background: linear-gradient(135deg, #fff, #ffb6c1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1.6;
  }
  body.en .question-text { font-family: 'Dancing Script', cursive; font-size: 38px; }

  .buttons-row {
    display: flex;
    gap: 20px;
    align-items: center;
    justify-content: center;
    min-height: 70px;
    position: relative;
    direction: ltr;
  }
  .btn-yes {
    background: linear-gradient(135deg, #ff3366, #ff6b95);
    border: none;
    padding: 15px 32px;
    border-radius: 50px;
    color: #fff;
    font-size: 20px;
    font-family: 'Cairo', sans-serif;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 10px 35px rgba(255, 51, 102, 0.5);
    z-index: 5;
    white-space: nowrap;
    flex-shrink: 0;
  }
  body.en .btn-yes { font-family: 'Quicksand', sans-serif; }
  .btn-yes:hover {
    transform: scale(1.08);
    box-shadow: 0 14px 50px rgba(255, 51, 102, 0.75);
  }
  .btn-no {
    background: rgba(255, 80, 130, 0.15);
    border: 2px solid rgba(255, 120, 170, 0.4);
    padding: 15px 40px;
    border-radius: 50px;
    color: #ffb6c1;
    font-size: 20px;
    font-family: 'Cairo', sans-serif;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.18s ease;
    z-index: 4;
    white-space: nowrap;
    flex-shrink: 0;
    box-shadow: 0 4px 20px rgba(255, 80, 130, 0.2);
    backdrop-filter: blur(10px);
  }
  body.en .btn-no { font-family: 'Quicksand', sans-serif; }
  .btn-no.running {
    animation: wiggle 0.4s ease infinite;
    background: rgba(255, 80, 130, 0.2);
    border-color: rgba(255, 120, 170, 0.5);
    box-shadow: 0 4px 25px rgba(255, 80, 130, 0.35);
  }
  @keyframes wiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-4deg); }
    75% { transform: rotate(4deg); }
  }
  .attempts-msg {
    margin-top: 25px;
    font-size: 16px;
    min-height: 25px;
    font-family: 'Cairo', sans-serif;
    color: #ff8aaf;
    transition: all 0.3s ease;
  }

  /* Screen 4: Celebration */
  .celebration {
    text-align: center;
    z-index: 100;
    animation: slideIn 0.8s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-height: 100vh;
    width: 100%;
    box-sizing: border-box;
    padding: 0 15px;
  }
  .celeb-hearts {
    font-size: 44px;
    animation: celebSpin 2s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(255, 80, 130, 0.8));
    margin-bottom: 2px;
  }
  @keyframes celebSpin {
    0%, 100% { transform: scale(1) rotate(-3deg); }
    50% { transform: scale(1.1) rotate(3deg); }
  }
  .celeb-title {
    font-family: 'Aref Ruqaa Ink', serif;
    font-size: 28px;
    margin: 4px 0 2px;
    background: linear-gradient(135deg, #ff5c8a, #ffb6c1, #fff, #ffb6c1, #ff5c8a);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: shimmer 3s ease infinite;
  }
  body.en .celeb-title { font-family: 'Dancing Script', cursive; font-size: 30px; }
  .celeb-subtitle {
    font-family: 'Lemonada', cursive;
    font-size: 13px;
    color: #ff8aaf;
    margin-bottom: 6px;
  }
  .celeb-msg {
    font-size: 13px;
    color: rgba(255, 255, 255, 0.88);
    max-width: 480px;
    line-height: 1.6;
    margin: 4px auto 0;
    font-weight: 300;
    text-align: center;
  }
  .celeb-msg .name {
    font-family: 'Aref Ruqaa Ink', serif;
    font-size: 18px;
    color: #ff8aaf;
  }
  body.en .celeb-msg .name { font-family: 'Dancing Script', cursive; font-size: 17px; color: #ffb6c1; }
  .celeb-footer {
    margin-top: 10px;
    font-family: 'Aref Ruqaa Ink', serif;
    font-size: 20px;
    color: #ff5c8a;
    animation: pulse 2s ease-in-out infinite;
  }
  body.en .celeb-footer { font-family: 'Dancing Script', cursive; font-size: 19px; color: #ff6b95; }
  .celeb-tiny {
    margin-top: 4px;
    font-size: 11px;
    opacity: 0.4;
  }

  /* Our photo */
  .our-photo-wrapper {
    margin: 6px auto;
    text-align: center;
    animation: photoReveal 1.5s ease 0.5s both;
  }
  @keyframes photoReveal {
    from { opacity: 0; transform: scale(0.8) rotate(-3deg); }
    to { opacity: 1; transform: scale(1) rotate(0deg); }
  }
  .our-photo {
    width: 110px;
    height: 145px;
    object-fit: cover;
    object-position: top;
    border-radius: 14px;
    border: 2px solid rgba(255, 150, 180, 0.4);
    box-shadow: 0 6px 25px rgba(255, 80, 130, 0.3), 0 0 40px rgba(255, 80, 130, 0.1);
    transition: transform 0.4s ease;
  }
  .our-photo:hover {
    transform: scale(1.05) rotate(2deg);
  }
  .photo-caption {
    font-family: 'Lemonada', cursive;
    font-size: 11px;
    color: #ffb6c1;
    margin-top: 4px;
    opacity: 0.85;
    animation: pulse 2s ease-in-out infinite;
  }
  body.en .photo-caption { font-family: 'Dancing Script', cursive; font-size: 13px; }

  /* Confetti */
  .confetti-piece {
    position: fixed;
    z-index: 90;
    pointer-events: none;
    animation: confettiFall linear forwards;
  }
  @keyframes confettiFall {
    0% { opacity: 1; transform: translateY(-10vh) rotate(0deg); }
    100% { opacity: 0; transform: translateY(110vh) rotate(720deg); }
  }

  /* Heart burst */
  .burst-heart {
    position: fixed;
    pointer-events: none;
    z-index: 95;
    animation: burst 1.8s ease-out forwards;
  }
  @keyframes burst {
    0% { opacity: 1; transform: translate(0, 0) scale(0.3); }
    100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(1.6); }
  }

  /* Responsive */
  @media (max-width: 600px) {
    .letter-name { font-size: 38px; }
    body.en .letter-name { font-size: 32px; }
    .letter-body { font-size: 15px; line-height: 1.9; }
    body.en .letter-body { font-size: 14px; }
    .letter-box { padding: 25px 18px; }
    .letter-sub { font-size: 13px; }
    .question-text { font-size: 22px; }
    body.en .question-text { font-size: 24px; }
    .celeb-title { font-size: 22px; }
    body.en .celeb-title { font-size: 24px; }
    .celeb-msg { font-size: 12px; line-height: 1.5; }
    .celeb-subtitle { font-size: 11px; }
    .celeb-footer { font-size: 17px; }
    .opener-emoji { font-size: 70px; }
    .opener-text { font-size: 16px; padding: 0 10px; }
    .opener-hint { font-size: 12px; padding: 0 15px; }
    .btn-yes { padding: 12px 20px; font-size: 14px; }
    .btn-no { padding: 12px 24px; font-size: 14px; }
    .question-emoji { font-size: 60px; }
    .lang-toggle { font-size: 11px; padding: 6px 12px; top: 10px; left: 10px; }
    .buttons-row { gap: 12px; flex-direction: column; }
    .celebration { padding: 0 10px; }
    .celeb-hearts { font-size: 32px; }
    .our-photo { width: 90px; height: 115px; border-radius: 12px; }
    .photo-caption { font-size: 10px; }
    .celeb-tiny { font-size: 10px; }
    #screen4 { padding-top: 8px; }
    .continue-btn { padding: 12px 30px; font-size: 16px; }
    .attempts-msg { font-size: 14px; padding: 0 10px; }
  }
</style>
</head>
<body>

<!-- Language Toggle -->
<button class="lang-toggle" id="langToggle" onclick="switchLang()">Ø¹Ø§ÙŠØ²Ø§Ù‡Ø§ Ø¨Ø§Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØŸ ØªØ¯Ù„Ù„ÙŠ ğŸ’•</button>

<div class="hearts-bg" id="heartsBg"></div>

<!-- Screen 1: Opener -->
<div class="screen active" id="screen1">
  <div class="opener-wrapper" onclick="openLetter()">
    <span class="opener-emoji" id="openerEmoji">ğŸ’Œ</span>
    <div class="opener-text" id="openerText">Ø¹Ù†Ø¯Ùƒ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø­Ø¯ Ø¨ÙŠØ­Ø¨Ùƒ Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ (Ø¹Ø§Ø±Ù Ù…Ø¨ØªØ­Ø¨ÙŠØ´ Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø¨Ø³ Ù…ØªÙ‚Ù„Ù‚ÙŠØ´ ğŸ˜˜)...</div>
    <div class="opener-hint" id="openerHint">Ø§ØªÙƒÙŠ Ø¹Ù„ÙŠ Ø§Ù„Ù†ÙˆÙ†Ùˆ Ø¯Ù‡ ÙƒØ¯Ù‡ ğŸ‘¶ (Ø¨Ø³ Ø¨Ø±Ø§Ø­Ù‡ Ø¹Ù„ÙŠ Ø§Ù„Ù†ÙˆÙ†Ùˆ Ø¹Ø´Ø§Ù† Ø­Ø¨ÙŠØ¨ØªÙŠ Ø§Ù„Ù„Ù‡ ÙŠØ­ÙØ¸Ù‡Ø§ Ø³Ù†Ø³ØªÙŠÙ ÙˆÙ…Ù…ÙƒÙ† ØªØ¹ÙŠØ·)</div>
  </div>
</div>

<!-- Screen 2: Letter -->
<div class="screen" id="screen2">
  <div class="letter-box">
    <div class="letter-name" id="letterName">ÙŠØ§Ø³Ù…ÙŠÙ‰Û á¥«á­¡</div>
    <div class="letter-sub" id="letterSub">~ Ø­Ø¨ÙŠØ¨Ø© Ø´Ø§Ø¯ÙŠ ÙˆØ¹ÙŠÙˆÙ†Ù‡ ~</div>
    <div class="letter-body" id="letterContent"></div>
    <button class="continue-btn" id="continueBtn" onclick="showQuestion()">ÙƒÙ…Ù„ÙŠ Ù‚Ø±Ø§ÙŠØ©... ğŸ’Œ</button>
  </div>
</div>

<!-- Screen 3: Question -->
<div class="screen" id="screen3">
  <div class="question-box">
    <div class="question-emoji">ğŸ’—</div>
    <div class="question-text" id="questionText">
      Ù‡ØªØ³Ø§Ù…Ø­ÙŠÙ†ÙŠ Ø¥Ù†ÙŠ ÙÙˆÙ‘Øª<br>Ø§Ù„ÙØ§Ù„Ù†ØªØ§ÙŠÙ† ÙˆØ¥Ø­Ù†Ø§ Ø²Ø¹Ù„Ø§Ù†ÙŠÙ† ÙˆÙ…Ø´ Ø³ÙˆØ§ØŸ
    </div>
    <div class="buttons-row" id="buttonsRow">
      <button class="btn-yes" id="btnYes" onclick="sayYes()">Ø£ÙŠÙˆØ© Ø·Ø¨Ø¹Ø§Ù‹ Ø³Ø§Ù…Ø­ØªÙƒ ğŸ¥ºâ¤ï¸ (Ø¨Ø³ Ù…ØªØ²Ø¹Ù„Ù†ÙŠØ´ ØªØ§Ù†ÙŠ) </button>
      <button class="btn-no" id="btnNo" onmouseover="runAway()" ontouchstart="runAway(event)">Ù„Ø§Ø£Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§ ğŸ˜¤</button>
    </div>
    <div class="attempts-msg" id="noAttempts"></div>
  </div>
</div>

<!-- Screen 4: Celebration -->
<div class="screen" id="screen4">
  <div class="celebration">
    <div class="celeb-hearts">ğŸ’–</div>
    <div class="celeb-title" id="celebTitle">Ø£Ø­Ù„Ù‰  Ø£ÙŠÙˆÙˆÙˆÙˆØ©  ÙÙŠ Ø­ÙŠØ§Ø§Ø§Ø§Ø§Ø§Ø§Ø§ØªÙŠ â¤ï¸â¤ï¸</div>
    <div class="celeb-subtitle" id="celebSub"> â¤ï¸â¤ï¸â¤ï¸ğŸ˜‚ ÙˆÙ…Ù† Ù‚Ù„Ø¨Ùƒ Ø§Ù†Ø§ Ø¹Ø§Ø§Ø§Ø±Ù </div>
    <div class="our-photo-wrapper">
      <img src="us.png" alt="Us" class="our-photo" />
      <div class="photo-caption" id="photoCaption">Ø£Ø­Ù„Ù‰ Ø§ØªÙ†ÙŠÙ† ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ğŸ¤</div>
    </div>
    <div class="celeb-msg" id="celebMsg">
       <span class="name">ÙŠØ§Ø³Ù…ÙŠÙ‰Û </span> ØŒ
      <br>
      Ø­Ø¨ÙŠØ¨ØªÙŠ Ù…Ø´ Ù…Ø­ØªØ§Ø¬Ø© ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø³Ù†Ø© Ø¹Ø´Ø§Ù† Ø£Ù‚ÙˆÙ„Ù‡Ø§ Ø¥Ù†Ù‡Ø§ Ø£Ø­Ù„Ù‰ Ø­Ø§Ø¬Ø© Ø­ØµÙ„ØªÙ„ÙŠ ÙÙŠ Ø­ÙŠØ§ØªÙŠ.
      <br>
     Ø§Ù†ØªÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ ÙˆÙ†ÙˆØ± Ø¹ÙŠÙ†ÙŠ Ùˆ ÙƒÙ„ ÙŠÙˆÙ… Ù…Ø¹Ø§ÙƒÙŠ Ù‡Ùˆ Valentine.
      <br>
     Ø²Ø¹Ù„Ùƒ ØºØ§Ù„ÙŠ Ø¹Ù„ÙŠØ§ ÙˆØ¹Ù…Ø±Ù‡ Ù…Ø§ÙŠÙ‡ÙˆÙ† Ø¹Ù„ÙŠ Ù‚Ù„Ø¨ÙŠ ÙˆØ§Ù„Ù„Ù‡.. Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§ Ù…Ù† Ø§ÙŠ Ø­Ø§Ø¬Ø© ØªØ²Ø¹Ù„Ùƒ.
      <br>
      Ø®Ù„ÙŠÙƒÙŠ Ø¹Ø§Ø±ÙØ© Ø¯Ø§ÙŠÙ…Ø§Ù‹ Ø§Ù† Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨Ùƒ Ø¨ÙŠØ­Ø¨Ùƒ Ù…Ù† Ù‚Ù„Ø¨Ù‡ ÙˆÙ‡ÙŠØ¶Ù„ Ù‡Ù†Ø§ Ø¬Ù†Ø¨Ùƒ Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…Ø± Ø§Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ â¤ï¸
      <br>
     ÙˆØ£ØªØ·Ù…Ù†ÙŠØŒ Ø§Ù†Ø§ Ù…Ø´ Ù‡Ø²Ø¹Ù„Ùƒ ÙˆÙ„Ø§ Ù‡Ø³ÙŠØ¨ Ø¬ÙˆØ§ÙƒÙŠ Ø§ÙŠ Ø­Ø§Ø¬Ø© ÙˆØ­Ø´Ø© Ø§Ø¨Ø¯Ø§Ù‹ ğŸ«‚â¤ï¸
    </div>
    <div class="celeb-footer" id="celebFooter">Ø¨Ø­Ø¨Ùƒ ÙŠØ§ Ø¹ÙŠÙˆÙ† Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨Ùƒ â¤ï¸â¤ï¸</div>
    <div class="celeb-tiny" id="celebTiny">~ Ù…Ù† Ø­Ø¨ÙŠØ¨ ÙŠØ§Ø³Ù…ÙŠÙ†~</div>
  </div>
</div>

<script>
  const floaters = ['ğŸ’•', 'ğŸ’—', 'ğŸ’–', 'âœ¨', 'ğŸ’', 'ğŸŒ¹', 'â™¥ï¸', 'ğŸŒ¸', 'ğŸ’«', 'ğŸ©·'];
  const bg = document.getElementById('heartsBg');

  for (let i = 0; i < 25; i++) {
    const h = document.createElement('div');
    h.className = 'floating-heart';
    h.textContent = floaters[Math.floor(Math.random() * floaters.length)];
    h.style.left = Math.random() * 100 + '%';
    h.style.fontSize = (14 + Math.random() * 20) + 'px';
    h.style.animationDuration = (9 + Math.random() * 14) + 's';
    h.style.animationDelay = (Math.random() * 12) + 's';
    bg.appendChild(h);
  }

  for (let i = 0; i < 50; i++) {
    const s = document.createElement('div');
    s.className = 'sparkle';
    s.style.left = Math.random() * 100 + '%';
    s.style.top = Math.random() * 100 + '%';
    s.style.animationDelay = (Math.random() * 3) + 's';
    s.style.animationDuration = (1.5 + Math.random() * 2.5) + 's';
    document.body.appendChild(s);
  }

  for (let i = 0; i < 10; i++) {
    const p = document.createElement('div');
    p.className = 'petal';
    p.textContent = 'ğŸŒ¸';
    p.style.left = Math.random() * 100 + '%';
    p.style.fontSize = (12 + Math.random() * 10) + 'px';
    p.style.animationDuration = (10 + Math.random() * 10) + 's';
    p.style.animationDelay = (Math.random() * 15) + 's';
    document.body.appendChild(p);
  }

  function spawnShootingStar() {
    const s = document.createElement('div');
    s.className = 'shooting-star';
    s.style.left = (20 + Math.random() * 60) + '%';
    s.style.top = (5 + Math.random() * 30) + '%';
    document.body.appendChild(s);
    setTimeout(() => s.remove(), 1500);
  }
  setInterval(spawnShootingStar, 5000);
  setTimeout(spawnShootingStar, 2500);

  // ============ LANGUAGE SYSTEM ============
  let lang = 'ar';

  const content = {
    ar: {
      toggleBtn: 'Ø¹Ø§ÙŠØ²Ø§Ù‡Ø§ Ø¨Ø§Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØŸ ØªØ¯Ù„Ù„ÙŠ ğŸ’',
      openerEmoji: 'ğŸ’Œ',
      openerText: 'Ø¹Ù†Ø¯Ùƒ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø­Ø¯ Ø¨ÙŠØ­Ø¨Ùƒ Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ (Ø¹Ø§Ø±Ù Ù…Ø¨ØªØ­Ø¨ÙŠØ´ Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø¨Ø³ Ù…ØªÙ‚Ù„Ù‚ÙŠØ´ ğŸ˜˜)...',
      openerHint: 'Ø§ØªÙƒÙŠ Ø¹Ù„ÙŠ Ø§Ù„Ù†ÙˆÙ†Ùˆ Ø¯Ù‡ ÙƒØ¯Ù‡ ğŸ‘¶ (Ø¨Ø³ Ø¨Ø±Ø§Ø­Ù‡ Ø¹Ù„ÙŠ Ø§Ù„Ù†ÙˆÙ†Ùˆ Ø¹Ø´Ø§Ù† Ø­Ø¨ÙŠØ¨ØªÙŠ Ø§Ù„Ù„Ù‡ ÙŠØ­ÙØ¸Ù‡Ø§ Ø³Ù†Ø³ØªÙŠÙ ÙˆÙ…Ù…ÙƒÙ† ØªØ¹ÙŠØ·)',
      letterName: 'ÙŠØ§Ø³Ù…ÙŠÙ‰Û á¥«á­¡',
      letterSub: '~ Ø­Ø¨ÙŠØ¨Ø© Ø´Ø§Ø¯ÙŠ ÙˆØ¹ÙŠÙˆÙ†Ù‡ ~',
      letterBody: `Ø£Ù†Ø§ Ø¹Ø§Ø±Ù Ø¥Ù†ÙŠ Ù…ÙƒÙ†Ø´ ÙŠÙ†ÙØ¹ Ø£ÙÙˆÙ‘Øª Ø§Ù„ÙØ§Ù„Ù†ØªØ§ÙŠÙ† Ù…Ø¹Ø§ÙƒÙŠ ÙˆÙ„Ø§ Ø£ÙŠ Ù„Ø­Ø·Ø© ØºÙŠØ±Ù‡Ø§.. ÙˆØ¹Ø§Ø±Ù Ø¥Ù†Ùƒ <span class="highlight"> ØªØ³ØªØ§Ù‡Ù„ÙŠ ÙƒÙ„ Ø­Ø§Ø¬Ø© Ø­Ù„ÙˆØ© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§</span>.\n\nØ¨Ø³ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø£Ù†ÙŠ Ù…Ø´ Ù…Ø­ØªØ§Ø¬ Ù…Ù†Ø§Ø³Ø¨Ø© Ø¹Ø´Ø§Ù† Ø£Ù‚ÙˆÙ„Ùƒ Ø¥Ù†Ùƒ <span class="bold-love"> Ø£Ø¬Ù…Ù„ Ø­Ø§Ø¬Ø© Ø­ØµÙ„ØªÙ„ÙŠ ÙØ­ÙŠØ§ØªÙŠ</span>.\n\        Ø§Ù†ØªÙŠ Ø®Ø·ÙŠØ¨ØªÙŠ Ùˆ Ø­Ø¨ÙŠØ¨ØªÙŠ ÙˆØµØ§Ø­Ø¨ØªÙŠ Ø§Ù„ÙˆØ­ÙŠØ¯Ø© ÙˆØ§Ù‚Ø±Ø¨ Ø­Ø¯ Ù„Ù‚Ù„Ø¨ÙŠ ÙˆØ§Ù„Ù„Ù‡ ğŸ«‚â¤ï¸\n\ Ø¹Ù…Ù„ØªÙ„Ùƒ Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„ØµØºÙŠØ±Ø© Ø¯ÙŠ... Ø¹Ø´Ø§Ù† Ø¹Ø§ÙŠØ² Ø£Ù‚ÙˆÙ„Ùƒ Ø­Ø§Ø¬Ø© Ù…Ù‡Ù…Ø©... `,
      continueBtn: 'ÙƒÙ…Ù„ÙŠ Ù‚Ø±Ø§ÙŠØ©... ğŸ’Œ',
      questionText: 'Ù‡ØªØ³Ø§Ù…Ø­ÙŠÙ†ÙŠ Ø¥Ù†ÙŠ ÙÙˆÙ‘Øª<br>Ø§Ù„ÙØ§Ù„Ù†ØªØ§ÙŠÙ† ÙˆØ¥Ø­Ù†Ø§ Ø²Ø¹Ù„Ø§Ù†ÙŠÙ† ÙˆÙ…Ø´ Ø³ÙˆØ§ØŸ',
      btnYes: 'Ø£ÙŠÙˆØ© Ø·Ø¨Ø¹Ø§Ù‹ Ø³Ø§Ù…Ø­ØªÙƒ ğŸ¥ºâ¤ï¸ (Ø¨Ø³ Ù…ØªØ²Ø¹Ù„Ù†ÙŠØ´ ØªØ§Ù†ÙŠ) ',
      btnNo: 'Ù„Ø§Ø£Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§ ğŸ˜¤',
      funnyMsgs: [
        "Ù‡Ø§Ù‡Ø§Ù‡Ù‡ Ù†Ø¬ÙˆÙ… Ø§Ù„Ø³Ù…Ø§ Ø§Ù‚Ø±Ø¨Ù„Ùƒ ğŸ˜",
        "Ù…ØªØ­Ø§ÙˆÙ„ÙŠÙŠÙŠÙŠØ´ Ù‡ÙŠØ¬Ø±ÙŠ Ù…Ù†Ùƒ ğŸƒ",
        "Ù„Ø§ Ù…Ø§Ù‡Ùˆ Ù‡ÙŠØ¬Ø±ÙŠ Ù„Ø­Ø¯ Ù…Ø§ØªØ±Ø¶ÙŠ ÙˆØªÙ‚ÙˆÙ„ÙŠ Ø§ÙŠÙˆØ© ğŸ˜",
        "ÙŠÙ…ÙƒÙ† Ø´Ø§Ø·Ø±Ø© ÙÙƒÙ„ Ø­Ø§Ø¬Ø© Ø¨ØªØªØ­Ø¯ÙŠÙ†ÙŠ ÙÙŠÙ‡Ø§ Ø¨Ø³ Ù…Ø´ Ø§Ù„Ù…Ø±Ø© Ø¯ÙŠÙ‡ Ù„Ø§Ø§Ø§ ğŸ˜‚",
        "ÙŠØ¹Ù†ÙŠ Ù‡ØªÙ‚ÙˆÙ„ÙŠ Ù„Ø£ Ù„Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨ÙƒØŸ Ø¨Ø¬Ø¯ØŸ ğŸ¥º",
        "Ø­ØªÙ‰ Ø§Ù„Ø²Ø±Ø§Ø± Ø¹Ø§Ø±Ù Ø¥Ù†Ùƒ Ø¨ØªØ­Ø¨ÙŠÙ†ÙŠ.. Ø®Ù„Ø¨ÙˆÙˆØµ (Ø¨Ø§ÙŠÙ†Ø© Ø§ÙˆÙŠ ÙŠØ¹Ù†ÙŠ)",
        "Ø§ØªÙƒÙŠ Ø¹Ù„ÙŠ Ø£ÙŠÙˆÙ‡ ÙˆØ­ÙŠØ§Ø§Ø§ØªÙŠÙŠÙŠ (Ø§Ù†ØªÙŠ Ø­Ø±Ù‡ ÙÙŠ Ø³ÙˆØ´ÙŠ Ø¬ÙˆÙ‡  ğŸ£ğŸ¤·ğŸ¼)",
        "ÙŠÙ†ÙØ¹ ÙƒØ¯Ù‡ Ø²Ù‡Ù‚Ù†Ù‹Ø§ Ø§Ù„Ø²Ø±Ø§Ø± ÙˆÙ…Ø´ÙŠÙ†Ø§Ù‡ØŸ.. Ù‚ÙˆÙ„ÙŠ Ø£ÙŠÙˆÙ‡ Ù„Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨Ùƒ Ø¨Ù‚Ù‰ ğŸ¥ºğŸ˜‚ğŸ’•",
      ],
      noGone: "ÙŠÙ†ÙØ¹ ÙƒØ¯Ù‡ Ø²Ù‡Ù‚Ù†Ù‹Ø§ Ø§Ù„Ø²Ø±Ø§Ø± ÙˆÙ…Ø´ÙŠÙ†Ø§Ù‡ØŸ.. Ø¨Ø³ Ø§Ù†Ø§ Ù…Ø²Ù‡Ù‚ØªØ´ ÙˆÙ…Ø´ Ù‡Ù…Ø´ÙŠ Ù…Ù† Ù‡Ù†Ø§ ØºÙŠØ± Ø§Ù…Ø§ ØªÙ‚ÙˆÙ„ÙŠ Ø£ÙŠÙˆÙ‡ Ù„Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨Ùƒ  â¤ï¸ğŸ˜",
      celebTitle: 'Ø£Ø­Ù„Ù‰  Ø£ÙŠÙˆÙˆÙˆÙˆØ©  ÙÙŠ Ø­ÙŠØ§Ø§Ø§Ø§Ø§Ø§Ø§Ø§ØªÙŠ â¤ï¸â¤ï¸',
      celebSub: ' â¤ï¸â¤ï¸â¤ï¸ğŸ˜‚ ÙˆÙ…Ù† Ù‚Ù„Ø¨Ùƒ Ø§Ù†Ø§ Ø¹Ø§Ø§Ø§Ø±Ù ',
      celebMsg: ` <span class="name">ÙŠØ§Ø³Ù…ÙŠÙ‰Û </span> ØŒ
      <br>
      Ø­Ø¨ÙŠØ¨ØªÙŠ Ù…Ø´ Ù…Ø­ØªØ§Ø¬Ø© ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø³Ù†Ø© Ø¹Ø´Ø§Ù† Ø£Ù‚ÙˆÙ„Ù‡Ø§ Ø¥Ù†Ù‡Ø§ Ø£Ø­Ù„Ù‰ Ø­Ø§Ø¬Ø© Ø­ØµÙ„ØªÙ„ÙŠ ÙÙŠ Ø­ÙŠØ§ØªÙŠ.
      <br>
     Ø§Ù†ØªÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ ÙˆÙ†ÙˆØ± Ø¹ÙŠÙ†ÙŠ Ùˆ ÙƒÙ„ ÙŠÙˆÙ… Ù…Ø¹Ø§ÙƒÙŠ Ù‡Ùˆ Valentine.
      <br>
     Ø²Ø¹Ù„Ùƒ ØºØ§Ù„ÙŠ Ø¹Ù„ÙŠØ§ ÙˆØ¹Ù…Ø±Ù‡ Ù…Ø§ÙŠÙ‡ÙˆÙ† Ø¹Ù„ÙŠ Ù‚Ù„Ø¨ÙŠ ÙˆØ§Ù„Ù„Ù‡.. Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§ Ù…Ù† Ø§ÙŠ Ø­Ø§Ø¬Ø© ØªØ²Ø¹Ù„Ùƒ.
      <br>
      Ø®Ù„ÙŠÙƒÙŠ Ø¹Ø§Ø±ÙØ© Ø¯Ø§ÙŠÙ…Ø§Ù‹ Ø§Ù† Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨Ùƒ Ø¨ÙŠØ­Ø¨Ùƒ Ù…Ù† Ù‚Ù„Ø¨Ù‡ ÙˆÙ‡ÙŠØ¶Ù„ Ù‡Ù†Ø§ Ø¬Ù†Ø¨Ùƒ Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…Ø± Ø§Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ â¤ï¸
      <br>
     ÙˆØ£ØªØ·Ù…Ù†ÙŠØŒ Ø§Ù†Ø§ Ù…Ø´ Ù‡Ø²Ø¹Ù„Ùƒ ÙˆÙ„Ø§ Ù‡Ø³ÙŠØ¨ Ø¬ÙˆØ§ÙƒÙŠ Ø§ÙŠ Ø­Ø§Ø¬Ø© ÙˆØ­Ø´Ø© Ø§Ø¨Ø¯Ø§Ù‹ ğŸ«‚â¤ï¸`,
      celebFooter: 'Ø¨Ø­Ø¨Ùƒ ÙŠØ§ Ø¹ÙŠÙˆÙ† Ø´Ø§Ø¯ÙŠ Ø­Ø¨ÙŠØ¨Ùƒ â¤ï¸â¤ï¸',
      celebTiny: '~ Ù…Ù† Ø­Ø¨ÙŠØ¨ ÙŠØ§Ø³Ù…ÙŠÙ†~',
      photoCaption: 'Ø£Ø­Ù„Ù‰ Ø§ØªÙ†ÙŠÙ† ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ğŸ¤',
    },
    en: {
      toggleBtn: 'Ø¹Ø§ÙŠØ²Ø§Ù‡Ø§ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØŸ Ø¨Ø³ ÙƒØ¯Ù‡ØŸ Ø¹ÙŠÙˆÙ†ÙŠ Ù„Ø§Ù„Ùƒ ğŸ’•',
      openerEmoji: 'ğŸ’Œ',
      openerText: 'You have a message from someone who loves you more than anything (I know you don\'t like surprises but trust me .. don\'t worry ğŸ˜˜)',
      openerHint: 'Tap on this nono ğŸ‘¶ (but gently cause my lovely nono is sensitive and might cry)',
      letterName: 'Yasmeen á¥«á­¡',
      letterSub: '~ hbibt Shady w nor 3youno ~',
      letterBody: `I know I shouldn't have missed Valentine's with you or any other moment... and I know you <span class="highlight">deserve everything beautiful in this world</span>.\n\nBut the truth is I don't need an occasion to tell you that you're <span class="bold-love">the best thing that ever happened in my life</span>.\n\nYou're my fiancÃ©e, my love, my only best friend, and the closest person to my heart wallahi ğŸ«‚â¤ï¸\n\nI made you this little thing... because I want to tell you something important... `,
      continueBtn: 'Keep Reading... ğŸ’Œ',
      questionText: 'Will you forgive me for missing<br>Valentine\'s when we werenâ€™t together?',
      btnYes: 'Yes of course I forgive you ğŸ¥ºâ¤ï¸ (but don\'t upset me again) ',
      btnNo: 'Nooooooo ğŸ˜¤',
      funnyMsgs: [
        "Hahahh the stars are closer to you than this button ğŸ˜",
        "Don't even tryyyy it's running from you ğŸƒ",
        "Nope it'll keep running till you give in and say yes ğŸ˜",
        "You might be good at everything you challenge me in but not this time nooo ğŸ˜‚",
        "You'd really say no to Shady hbibk? Seriously? ğŸ¥º",
        "Even the button knows you love me.. khalboos (it's so obvious)",
        "Tap yes pleeease (you're free there might be sushi inside ğŸ£ğŸ¤·ğŸ¼)",
        "We really bored the button and it left?.. say yes to Shady hbibk already ğŸ¥ºğŸ˜‚ğŸ’•",
      ],
      noGone: "We really bored the button and it left?.. but I'm not bored and I'm not leaving until you say yes to Shady hbibk â¤ï¸ğŸ˜",
      celebTitle: 'The sweetest YES in my lifeee â¤ï¸â¤ï¸',
      celebSub: ' â¤ï¸â¤ï¸â¤ï¸ğŸ˜‚ and from your heart I knooow ',
      celebMsg: ` <span class="name">Yasmeen</span> ,
      <br>
      My hbibt doesn't need a day in the year for me to tell her she's the best thing that happened in my life.
      <br>
      2nti hbibti, w nor 3youni, and every day with you is Valentine's.
      <br>
      Your sadness is precious to me and it never sits right in my heart wallahi.. forgive me for anything that upset you.
      <br>
      Always know that Shady hbibk loves you from his heart and will stay right here beside you forever inshallah â¤ï¸
      <br>
      And don't worry, I'll never upset you or leave anything bad inside you ever ğŸ«‚â¤ï¸`,
      celebFooter: 'Love you ya eyes of Shady hbibk â¤ï¸â¤ï¸',
      celebTiny: '~ from Yasmeen\'s hbib ~',
      photoCaption: 'The most beautiful two in the world ğŸ¤',
    }
  };

  function switchLang() {
    lang = lang === 'ar' ? 'en' : 'ar';
    const c = content[lang];

    document.body.classList.toggle('en', lang === 'en');
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.lang = lang;

    document.getElementById('langToggle').textContent = c.toggleBtn;
    document.getElementById('openerEmoji').textContent = c.openerEmoji;
    document.getElementById('openerText').textContent = c.openerText;
    document.getElementById('openerHint').textContent = c.openerHint;
    document.getElementById('letterName').textContent = c.letterName;
    document.getElementById('letterSub').textContent = c.letterSub;
    document.getElementById('continueBtn').textContent = c.continueBtn;
    document.getElementById('questionText').innerHTML = c.questionText;
    document.getElementById('btnYes').textContent = c.btnYes;
    document.getElementById('btnNo').textContent = c.btnNo;
    document.getElementById('celebTitle').textContent = c.celebTitle;
    document.getElementById('celebSub').textContent = c.celebSub;
    document.getElementById('celebMsg').innerHTML = c.celebMsg;
    document.getElementById('celebFooter').textContent = c.celebFooter;
    document.getElementById('celebTiny').textContent = c.celebTiny;
    document.getElementById('photoCaption').textContent = c.photoCaption;

    // Reset state
    charIndex = 0;
    clearTimeout(typewriterTimer);
    document.getElementById('letterContent').innerHTML = '';
    noCount = 0;
    document.getElementById('noAttempts').textContent = '';
    const btn = document.getElementById('btnNo');
    btn.style.position = '';
    btn.style.left = '';
    btn.style.top = '';
    btn.style.display = '';
    btn.classList.remove('running');

    // If currently on the letter screen, restart the typewriter
    if (document.getElementById('screen2').classList.contains('active')) {
      typeWriter();
    }
  }

  // ============ SCREENS ============
  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function openLetter() {
    showScreen('screen2');
    charIndex = 0;
    document.getElementById('letterContent').innerHTML = '';
    typeWriter();
  }

  // ============ TYPEWRITER ============
  let charIndex = 0;
  let typewriterTimer = null;
  function typeWriter() {
    const text = content[lang].letterBody;
    const el = document.getElementById('letterContent');
    if (charIndex < text.length) {
      if (text[charIndex] === '<') {
        const closingTag = text.indexOf('>', text.indexOf('</', charIndex));
        const chunk = text.substring(charIndex, closingTag + 1);
        el.innerHTML += chunk;
        charIndex = closingTag + 1;
      } else if (text[charIndex] === '\n') {
        el.innerHTML += '<br>';
        charIndex++;
      } else {
        el.innerHTML += text[charIndex];
        charIndex++;
      }
      typewriterTimer = setTimeout(typeWriter, 20);
    }
  }

  function showQuestion() { showScreen('screen3'); }

  // ============ RUNAWAY BUTTON ============
  let noCount = 0;

  function runAway(e) {
    if (e && e.preventDefault) e.preventDefault();
    const btn = document.getElementById('btnNo');
    const yesBtn = document.getElementById('btnYes');
    const yesRect = yesBtn.getBoundingClientRect();
    const margin = 30;
    const btnRect = btn.getBoundingClientRect();
    const btnW = Math.max(btnRect.width, 100);
    const btnH = Math.max(btnRect.height, 45);
    const safeMargin = 10;
    const maxX = window.innerWidth - btnW - safeMargin;
    const maxY = window.innerHeight - btnH - safeMargin;

    let newX, newY, tries = 0;
    do {
      newX = Math.random() * maxX;
      newY = Math.random() * maxY;
      tries++;
    } while (
      tries < 50 &&
      newX < yesRect.right + margin &&
      newX + btnW > yesRect.left - margin &&
      newY < yesRect.bottom + margin &&
      newY + btnH > yesRect.top - margin
    );

    btn.style.position = 'fixed';
    btn.style.left = newX + 'px';
    btn.style.top = newY + 'px';
    btn.style.transition = 'all 0.18s ease';

    noCount++;
    btn.classList.add('running');

    const c = content[lang];
    const el = document.getElementById('noAttempts');
    if (noCount <= c.funnyMsgs.length) {
      el.textContent = c.funnyMsgs[noCount - 1];
    }
    if (noCount >= 8) {
      btn.style.display = 'none';
      el.textContent = c.noGone;
    }
  }

  // ============ CELEBRATION ============
  function sayYes() {
    showScreen('screen4');
    launchCelebration();
  }

  function launchCelebration() {
    const emojis = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸŒ¹', 'ğŸ’', 'âœ¨', 'ğŸ©·', 'ğŸŒ¸'];
    for (let i = 0; i < 35; i++) {
      setTimeout(() => {
        const h = document.createElement('div');
        h.className = 'burst-heart';
        h.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        h.style.left = '50%';
        h.style.top = '45%';
        h.style.fontSize = (22 + Math.random() * 28) + 'px';
        const angle = (Math.PI * 2 / 35) * i + (Math.random() - 0.5) * 0.5;
        const dist = 180 + Math.random() * 300;
        h.style.setProperty('--tx', Math.cos(angle) * dist + 'px');
        h.style.setProperty('--ty', Math.sin(angle) * dist + 'px');
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 1800);
      }, i * 35);
    }

    const colors = ['#ff3366', '#ff6b95', '#ffb6c1', '#ff4b7b', '#ffd1dc', '#fff', '#ff85a2', '#c9184a', '#ff0055'];
    for (let i = 0; i < 100; i++) {
      setTimeout(() => {
        const c = document.createElement('div');
        c.className = 'confetti-piece';
        c.style.left = Math.random() * 100 + '%';
        c.style.top = '-5%';
        c.style.width = (5 + Math.random() * 10) + 'px';
        c.style.height = (5 + Math.random() * 10) + 'px';
        c.style.background = colors[Math.floor(Math.random() * colors.length)];
        c.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
        c.style.animationDuration = (2 + Math.random() * 3) + 's';
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 5500);
      }, i * 25);
    }

    setInterval(() => {
      const h = document.createElement('div');
      h.className = 'burst-heart';
      h.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      h.style.left = (5 + Math.random() * 90) + '%';
      h.style.top = '110%';
      h.style.setProperty('--tx', (Math.random() - 0.5) * 80 + 'px');
      h.style.setProperty('--ty', -(window.innerHeight + 50) + 'px');
      h.style.animationDuration = '3.5s';
      h.style.fontSize = (18 + Math.random() * 20) + 'px';
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 3500);
    }, 350);
  }
</script>
</body>
</html>
